<!DOCTYPE html>
<html lang="pt-br"><head>
  <meta charset="utf-8">

  
  <title>Xadrez no R com {chess}</title>
  <meta name="title" content="Xadrez no R com {chess}">
  <meta name="description" content="Um pacote em R para ler, escrever, criar e explorar jogos de xadrez">

  
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://blog.curso-r.com/posts/2020-11-25-chess/">
  <meta property="og:title" content="Xadrez no R com {chess}">
  <meta property="og:description" content="Um pacote em R para ler, escrever, criar e explorar jogos de xadrez">
  <meta property="og:image" content="https://blog.curso-r.com/images/posts/banner/chess.webp?nf_resize=fit&w=300">

  
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://blog.curso-r.com/posts/2020-11-25-chess/">
  <meta property="twitter:title" content="Xadrez no R com {chess}">
  <meta property="twitter:description" content="Um pacote em R para ler, escrever, criar e explorar jogos de xadrez">
  <meta property="twitter:image" content="https://blog.curso-r.com/images/posts/banner/chess.webp">

  <!-- mobile responsive meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta name="generator" content="Hugo 0.83.1" />

  <!-- plugins -->
  
  <link rel="stylesheet" href="https://blog.curso-r.com/plugins/bootstrap/bootstrap.min.css ">
  
  <link rel="stylesheet" href="https://blog.curso-r.com/plugins/slick/slick.css ">
  
  <link rel="stylesheet" href="https://blog.curso-r.com/plugins/themify-icons/themify-icons.css ">
  
  <link rel="stylesheet" href="https://blog.curso-r.com/css/custom.css ">
  
  <link rel="stylesheet" href="https://blog.curso-r.com/css/github.css ">
  

  <!-- Main Stylesheet -->
  
  <link rel="stylesheet" href="https://blog.curso-r.com/css/style.min.css" media="screen">

  <!--Favicon-->
  <link rel="shortcut icon" href="https://blog.curso-r.com/images/favicon.png " type="image/x-icon">
  <link rel="icon" href="https://blog.curso-r.com/images/favicon.png " type="image/x-icon">
</head>
<body>
<!-- preloader start -->
<div class="preloader">
  <div class="loader">
    <span class="dot"></span>
    <div class="dots">
      <span></span>
      <span></span>
      <span></span>
    </div>
  </div>
</div>
<!-- preloader end -->
<header class="navigation">
  <nav class="navbar navbar-expand-lg navbar-light">
    <a class="navbar-brand" href="https://blog.curso-r.com/"><img class="img-fluid" src="https://blog.curso-r.com/images/logo.webp" alt="Blog | Curso-R" width = "200px", height="100px"></a>
    <button class="navbar-toggler border-0" type="button" data-toggle="collapse" data-target="#navogation"
      aria-controls="navogation" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse text-center" id="navogation">
      <ul class="navbar-nav ml-auto">
        
        
        <li class="nav-item">
          <a class="nav-link text-uppercase text-dark" href="https://blog.curso-r.com/">Blog</a>
        </li>
        
        
        
        <li class="nav-item">
          <a class="nav-link text-uppercase text-dark" href="https://blog.curso-r.com/categories/desafio">Desafios</a>
        </li>
        
        
        
        <li class="nav-item">
          <a class="nav-link text-uppercase text-dark" href="https://www.curso-r.com/cursos">Cursos</a>
        </li>
        
        
        
        <li class="nav-item">
          <a class="nav-link text-uppercase text-dark" href="https://discourse.curso-r.com/">Fórum</a>
        </li>
        
        
        
        <li class="nav-item">
          <a class="nav-link text-uppercase text-dark" href="https://www.curso-r.com">Curso-R</a>
        </li>
        
        
      </ul>
      
      <!-- search -->
      <form class="form-inline position-relative ml-lg-4 form-searh" action="/search">
        <input class="form-control px-0" type="search" placeholder="" id="search-query" name="s">
        <button class="search-icon" type="submit"><i class="ti-search text-dark"></i></button>
      </form>
      
    </div>
  </nav>
</header>



<section class="section bg-posts" style = "background-image: url('https://blog.curso-r.com/images/posts/banner/chess.webp')">
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <h1 class = "titulo-post">Xadrez no R com {chess}</h1>
      </div>
    </div>
  </div>
</section>



<section>
  <div class="container">
    <div class="row">
      <div class="col-lg-8">
        <ul class="list-inline d-flex justify-content-between py-3">
          <li class="list-inline-item">
            <i class="ti-user mr-2"></i>
            Escrito por
            
            
              <a href = "https://blog.curso-r.com/search/?s=Caio">Caio</a>
            
            em
            <a href="/categories/tutoriais">Tutoriais</a>
          </li>
          <li class="list-inline-item">
            <i class="ti-calendar mr-2"></i>
            25 de
            novembro de
            2020
          </li>
        </ul>
        <ul class="list-inline tag-list">
          
            <li class="list-inline-item m-1"><a href="/tags/xadrez">xadrez</a></li>
        </ul>
        <article class="content">
          
            
<script src="/rmarkdown-libs/header-attrs/header-attrs.js"></script>


<p><code>{chess}</code> é uma interface <em>opinionada</em> em R para o
<a href="https://github.com/niklasf/python-chess">python-chess</a>, uma biblioteca incrível
criada por <a href="https://github.com/niklasf">Niklas Fiekas</a>. Ela permite que usuários
leiam e escrevam arquivos <a href="https://en.wikipedia.org/wiki/Portable_Game_Notation">PGN</a>,
além de possibilitar a criação e exploração de árvores de jogos como aquelas
presentes em livros de xadrez.</p>
<p>Este pacote ainda está amadurecendo! Então eu encorajo todos a enviar suas
sugestões e bugs em <a href="https://github.com/curso-r/chess/issues">issues</a> no
repositório do pacote.</p>
<div id="instalação" class="section level2">
<h2>Instalação</h2>
<p>Você pode instalar a versão mais recente do <code>{chess}</code> do CRAN com:</p>
<pre class="r"><code>install.packages(&quot;chess&quot;)</code></pre>
<p>Isso deveria automaticamente instalar o python-chess no seu ambiente do
<code>{reticulate}</code>, mas você também pode fazer isso explicitamente com o comando:</p>
<pre class="r"><code>chess::install_chess()</code></pre>
</div>
<div id="exemplo" class="section level2">
<h2>Exemplo</h2>
<p>Para ler um jogo existente, basta usar <code>read_game()</code>. Para explorar ele, você
pode usar <code>forward()</code>/<code>back()</code>, assim como <code>variations()</code>/<code>variation()</code> para ver
todas as variações disponíveis para o próximo movimento e escolher uma delas.</p>
<pre class="r"><code>library(chess)

# Ler o primeiro jogo de My 60 Memorable Games
file &lt;- system.file(&quot;m60mg.pgn&quot;, package = &quot;chess&quot;)
fischer_sherwin &lt;- read_game(file, n_max = 1)

# Posição inicial
fischer_sherwin
#&gt;         &lt;Start&gt;
#&gt; r n b q k b n r
#&gt; p p p p p p p p
#&gt; . . . . . . . .
#&gt; . . . . . . . .
#&gt; . . . . . . . .
#&gt; . . . . . . . .
#&gt; P P P P P P P P
#&gt; R N B Q K B N R

# Navegar para 4. g3
fischer_sherwin %&gt;%
  forward(7)
#&gt;         &lt;4. g3&gt;
#&gt; r . b q k b n r
#&gt; p p . p . p p p
#&gt; . . n . p . . .
#&gt; . . p . . . . .
#&gt; . . . . P . . .
#&gt; . . . P . N P .
#&gt; P P P . . P . P
#&gt; R N B Q K B . R

# Ver todas as variações de 4...
fischer_sherwin %&gt;%
  forward(7) %&gt;%
  variations()
#&gt;      &lt;4... Nf6&gt;          &lt;4... d5&gt;
#&gt; r . b q k b . r    r . b q k b n r
#&gt; p p . p . p p p    p p . . . p p p
#&gt; . . n . p n . .    . . n . p . . .
#&gt; . . p . . . . .    . . p p . . . .
#&gt; . . . . P . . .    . . . . P . . .
#&gt; . . . P . N P .    . . . P . N P .
#&gt; P P P . . P . P    P P P . . P . P
#&gt; R N B Q K B . R    R N B Q K B . R

# Seguir a linha auxiliar
fischer_sherwin %&gt;%
  forward(7) %&gt;%
  variation(2)
#&gt;       &lt;4... d5&gt;
#&gt; r . b q k b n r
#&gt; p p . . . p p p
#&gt; . . n . p . . .
#&gt; . . p p . . . .
#&gt; . . . . P . . .
#&gt; . . . P . N P .
#&gt; P P P . . P . P
#&gt; R N B Q K B . R</code></pre>
<p>Você também pode criar o seu próprio jogo com <code>game()</code> e adicionar variações ao
mesmo: a função <code>move()</code> adiciona jogadas assim como ramos na árvore do jogo.
Strings são convertidas para jogadas simples, enquanto <code>list()</code> funciona
exatamente como os parênteses de um PGN, criando uma variação para a última
jogada. Aqui podemos ver como recriar o
<a href="https://en.wikipedia.org/wiki/Scholar%27s_mate">Mate do Pastor</a> e algumas
formas de evitá-lo:</p>
<pre class="r"><code># Mate do Pastor e algumas defesas
scholars_mate &lt;- game() %&gt;%
  move(&quot;e4&quot;) %&gt;%
  move(&quot;e5&quot;, list(&quot;e6&quot;), list(&quot;d5&quot;)) %&gt;%
  move(&quot;Bc4&quot;) %&gt;%
  move(&quot;Nc6&quot;, list(&quot;Nf6&quot;)) %&gt;%
  move(&quot;Qh5&quot;) %&gt;%
  move(&quot;Nf6&quot;, list(&quot;g6&quot;, &quot;Qf3&quot;, &quot;Nf6&quot;)) %&gt;%
  move(&quot;Qxf7&quot;)

# Última jogada da linha principal
scholars_mate
#&gt;      &lt;4. Qxf7#&gt;
#&gt; r . b q k b . r
#&gt; p p p p . Q p p
#&gt; . . n . . n . .
#&gt; . . . . p . . .
#&gt; . . B . P . . .
#&gt; . . . . . . . .
#&gt; P P P P . P P P
#&gt; R N B . K . N R</code></pre>
<p>Note que há muitas formas de estruturar a entrada de <code>move()</code>. Veja
<code>vignette("chess")</code> para mais informações.</p>
<p><code>{chess}</code> também traz muitas formas de ver tanto o jogo como um todo, quanto o
tabuleiro em um momento específico.</p>
<pre class="r"><code># Tabuleiro com unicode (não fica bonito no navegador)
print(scholars_mate, unicode = TRUE)
#&gt;      &lt;4. Qxf7#&gt;
#&gt; ♜ . ♝ ♛ ♚ ♝ . ♜
#&gt; ♟ ♟ ♟ ♟ . ♕ ♟ ♟
#&gt; . . ♞ . . ♞ . .
#&gt; . . . . ♟ . . .
#&gt; . . ♗ . ♙ . . .
#&gt; . . . . . . . .
#&gt; ♙ ♙ ♙ ♙ . ♙ ♙ ♙
#&gt; ♖ ♘ ♗ . ♔ . ♘ ♖

# Exportar o FEN do tabuleiro
fen(scholars_mate)
#&gt; [1] &quot;r1bqkb1r/pppp1Qpp/2n2n2/4p3/2B1P3/8/PPPP1PPP/RNB1K1NR b KQkq - 0 4&quot;

# Ver o PGN depois de um movimento
str(back(scholars_mate, 3))
#&gt; 2... Nc6 3. Qh5 Nf6 ( 3... g6 4. Qf3 Nf6 ) 4. Qxf7#

# Exportar o PGN depois de um movimento
pgn(back(scholars_mate, 3))
#&gt; [1] &quot;2... Nc6 3. Qh5 Nf6 ( 3... g6 4. Qf3 Nf6 ) 4. Qxf7#&quot;

# Imagem do tabuleiro atual
plot(scholars_mate)</code></pre>
<p><img src="https://raw.githubusercontent.com/curso-r/chess/master/man/figures/README-unnamed-chunk-4-1.png" width="100%" /></p>
</div>
<div id="motivação" class="section level2">
<h2>Motivação</h2>
<p>O python-chess serviu como inspiração (e base) para o <code>{chess}</code>. Enquanto a
versão original (e o <a href="https://github.com/jbkunst/rchess"><code>{rchess}</code></a>, por sinal)
trabalha genericamente com “geração de jogadas, validação de jogadas” (com classes
poderosas e sintaxe orientada a objeto), o <code>{chess}</code> é focado em facilitar a
criação e exploração de árvores PGN.</p>
<p>Ao limitar o escopo da API, eu acredito que o pacote fica mais intuitivo para
pessoas que só querem um jeito rápido de criar análises de jogos compartilháveis
ou facilmente explorar os jogos dos outros sem precisar depender de um software
visual.</p>
<p>O primeiro uso do <code>{chess}</code> foi me ajudando a estudar o <em>My 60 Memorable Games</em>
do Bobby Fischer. Depois de um <a href="https://github.com/curso-r/chess/blob/master/data-raw/m60mg.R">parsing</a>
muito difícil, eu consegui converter o livro todo para PGN e <a href="https://lichess.org/study/4zOTO2ki">disponibilizá-lo no
lichess</a>, mas eu ainda achava que a interface
não era boa o suficiente…</p>
</div>

          
        </article>
        
  <div class="disqus-comments">
    <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "curso-r-com" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  </div>


      </div>
      <div class="col-lg-1">
</div>
<div class="col-lg-3">
  
  <div class="widget">
    <h4 class="mb-4">POSTS MAIS RECENTES</h4>
    
    <div class="media mb-4">
      <div class="post-thumb-sm mr-3">
        <a href="https://blog.curso-r.com/posts/2022-08-12-rstudio-conf-impressoes/"><img class="mr-3 post-thumb-sm" src="https://blog.curso-r.com/images/posts/banner/lunch-with-hadley.jpg"></a>
      </div>
      <div class="media-body">
        <h5><a class="text-dark" href="https://blog.curso-r.com/posts/2022-08-12-rstudio-conf-impressoes/">Impressões pessoais da rstudio::conf(2022)</a></h5>
        <p>Por Julio, Flavia E. Rius e Beatriz em <a href="/categories/divulga%c3%a7%c3%a3o">Divulgação</a></p>
      </div>
    </div>
    
    <div class="media mb-4">
      <div class="post-thumb-sm mr-3">
        <a href="https://blog.curso-r.com/posts/2022-07-29-rstudio-conf-2022-dia2/"><img class="mr-3 post-thumb-sm" src="https://blog.curso-r.com/images/posts/banner/rstudio-conf-2022.png"></a>
      </div>
      <div class="media-body">
        <h5><a class="text-dark" href="https://blog.curso-r.com/posts/2022-07-29-rstudio-conf-2022-dia2/">rstudio::conf 2022, segundo dia de palestras</a></h5>
        <p>Por Julio em <a href="/categories/divulga%c3%a7%c3%a3o">Divulgação</a></p>
      </div>
    </div>
    
    <div class="media mb-4">
      <div class="post-thumb-sm mr-3">
        <a href="https://blog.curso-r.com/posts/2022-07-27-rstudio-conf-2022/"><img class="mr-3 post-thumb-sm" src="https://blog.curso-r.com/images/posts/banner/rstudio-conf-2022.png"></a>
      </div>
      <div class="media-body">
        <h5><a class="text-dark" href="https://blog.curso-r.com/posts/2022-07-27-rstudio-conf-2022/">rstudio::conf 2022, primeiro dia de palestras</a></h5>
        <p>Por Julio em <a href="/categories/divulga%c3%a7%c3%a3o">Divulgação</a></p>
      </div>
    </div>
    
  </div>
  <div class="widget">
    <h4 class="mb-4">LEIA MAIS SOBRE</h4>
    <ul class="list-inline tag-list">
      <li class="list-inline-item m-1"><a href="/categories/an%c3%a1lises">Análises</a></li>
      <li class="list-inline-item m-1"><a href="/categories/boas-pr%c3%a1ticas">Boas práticas</a></li>
      <li class="list-inline-item m-1"><a href="/categories/conceitos">Conceitos</a></li>
      <li class="list-inline-item m-1"><a href="/categories/debugging">Debugging</a></li>
      <li class="list-inline-item m-1"><a href="/categories/desafio">Desafio</a></li>
      <li class="list-inline-item m-1"><a href="/categories/discuss%c3%b5es">Discussões</a></li>
      <li class="list-inline-item m-1"><a href="/categories/divulga%c3%a7%c3%a3o">Divulgação</a></li>
      <li class="list-inline-item m-1"><a href="/categories/erros">Erros</a></li>
      <li class="list-inline-item m-1"><a href="/categories/pacotes">Pacotes</a></li>
      <li class="list-inline-item m-1"><a href="/categories/r">R</a></li>
      <li class="list-inline-item m-1"><a href="/categories/top-10">Top 10</a></li>
      <li class="list-inline-item m-1"><a href="/categories/tutoriais">Tutoriais</a></li>
      <li class="list-inline-item m-1"><a href="/categories/tutorial">Tutorial</a></li>
    </ul>
  </div>
</div>

    </div>
  </div>
</section>




<footer class="bg-footer" style = "background-image: url('https://blog.curso-r.com/images/footerImage.webp')">
  <div class="section">
    <div class="container">
      <div class="row">
        <div class="col-md-3 col-sm-6 mb-4 mb-md-0">
          <a href="https://www.curso-r.com"><img src="https://blog.curso-r.com/images/footerLogo.webp" alt="Blog | Curso-R" class="img-fluid"></a>
        </div>
        <div class="col-md-3 col-sm-6 mb-4 mb-md-0">
          
          <h6>Dúvidas de R?</h6>
          <ul class="list-unstyled">
            <li class="font-secondary text-dark"><a href="https://discourse.curso-r.com/">Acesse nosso fórum</a></li>
          </ul>
          
        </div>
        <div class="col-md-3 col-sm-6 mb-4 mb-md-0">
          
          <h6>Fale com a gente</h6>
          <ul class="list-unstyled">
            
            
            <li class="font-secondary text-dark"><a href="mailto:contato@curso-r.com">contato@curso-r.com</a></li>
            
          </ul>
          
        </div>
        <div class="col-md-3 col-sm-6 mb-4 mb-md-0">
          <h6>Siga a Curso-R</h6>
          <ul class="list-inline d-inline-block">
            
            <li class="list-inline-item"><a href="https://github.com/curso-r" class="text-dark" target = "_blank"><i class="ti-github"></i></a></li>
            
            <li class="list-inline-item"><a href="https://twitter.com/curso_r" class="text-dark" target = "_blank"><i class="ti-twitter-alt"></i></a></li>
            
            <li class="list-inline-item"><a href="https://www.instagram.com/cursoo_r/" class="text-dark" target = "_blank"><i class="ti-instagram"></i></a></li>
            
            <li class="list-inline-item"><a href="https://br.linkedin.com/company/curso-r" class="text-dark" target = "_blank"><i class="ti-linkedin"></i></a></li>
            
            <li class="list-inline-item"><a href="https://www.facebook.com/cursodeR/" class="text-dark" target = "_blank"><i class="ti-facebook"></i></a></li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>
    <div class="text-center pb-3 copyright">
        <h6 class="mb-0">Copyright © 2021 Curso-R</h6>
        <p class="mb-0" style = "font-size: 0.8em;"> Site feito em <a href = "https://gohugo.io/" target = "_blank">Hugo</a>, com o pacote <a href = "https://bookdown.org/yihui/blogdown/" target = "_blank">Blogdown</a>. Tema por <a href = "https://themefisher.com/" target = "_blank">Themefisher</a>.</p>
    </div>
</footer>



<script>
  var indexURL = "https://blog.curso-r.com/index.json"
</script>


<!-- JS Plugins -->

<script src="https://blog.curso-r.com/plugins/jQuery/jquery.min.js"></script>

<script src="https://blog.curso-r.com/plugins/bootstrap/bootstrap.min.js"></script>

<script src="https://blog.curso-r.com/plugins/slick/slick.min.js"></script>

<script src="https://blog.curso-r.com/plugins/headroom/headroom.js"></script>

<script src="https://blog.curso-r.com/plugins/instafeed/instafeed.min.js"></script>

<script src="https://blog.curso-r.com/plugins/masonry/masonry.js"></script>

<script src="https://blog.curso-r.com/plugins/reading-time/readingTime.min.js"></script>

<script src="https://blog.curso-r.com/plugins/smooth-scroll/smooth-scroll.js"></script>

<script src="https://blog.curso-r.com/plugins/search/fuse.min.js"></script>

<script src="https://blog.curso-r.com/plugins/search/mark.js"></script>

<script src="https://blog.curso-r.com/plugins/search/search.js"></script>

<script src="https://blog.curso-r.com/js/highlight.pack.js"></script>


<script>hljs.initHighlightingOnLoad();</script>

<script type="text/javascript"
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

<!-- Main Script -->

<script src="https://blog.curso-r.com/js/script.min.js"></script>

<!-- google analitycs -->

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-87272102-2', 'auto');
  ga('send', 'pageview');
</script>





</body>
</html>