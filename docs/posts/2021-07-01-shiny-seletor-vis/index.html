<!DOCTYPE html>
<html lang="pt-br"><head>
  <meta charset="utf-8">

  
  <title>Crie seletores de visualização no Shiny</title>
  <meta name="title" content="Crie seletores de visualização no Shiny">
  <meta name="description" content="Aprenda a criar seletores de visualização para o seu aplicativo Shiny.">

  
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://blog.curso-r.com/posts/2021-07-01-shiny-seletor-vis/">
  <meta property="og:title" content="Crie seletores de visualização no Shiny">
  <meta property="og:description" content="Aprenda a criar seletores de visualização para o seu aplicativo Shiny.">
  <meta property="og:image" content="https://blog.curso-r.com/images/posts/banner/seletor_vis_shiny.webp?nf_resize=fit&w=300">

  
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://blog.curso-r.com/posts/2021-07-01-shiny-seletor-vis/">
  <meta property="twitter:title" content="Crie seletores de visualização no Shiny">
  <meta property="twitter:description" content="Aprenda a criar seletores de visualização para o seu aplicativo Shiny.">
  <meta property="twitter:image" content="https://blog.curso-r.com/images/posts/banner/seletor_vis_shiny.webp">

  <!-- mobile responsive meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta name="generator" content="Hugo 0.85.0" />

  <!-- plugins -->
  
  <link rel="stylesheet" href="https://blog.curso-r.com/plugins/bootstrap/bootstrap.min.css ">
  
  <link rel="stylesheet" href="https://blog.curso-r.com/plugins/slick/slick.css ">
  
  <link rel="stylesheet" href="https://blog.curso-r.com/plugins/themify-icons/themify-icons.css ">
  
  <link rel="stylesheet" href="https://blog.curso-r.com/css/custom.css ">
  
  <link rel="stylesheet" href="https://blog.curso-r.com/css/github.css ">
  

  <!-- Main Stylesheet -->
  
  <link rel="stylesheet" href="https://blog.curso-r.com/css/style.min.css" media="screen">

  <!--Favicon-->
  <link rel="shortcut icon" href="https://blog.curso-r.com/images/favicon.png " type="image/x-icon">
  <link rel="icon" href="https://blog.curso-r.com/images/favicon.png " type="image/x-icon">
</head>
<body>
<!-- preloader start -->
<div class="preloader">
  <div class="loader">
    <span class="dot"></span>
    <div class="dots">
      <span></span>
      <span></span>
      <span></span>
    </div>
  </div>
</div>
<!-- preloader end -->
<header class="navigation">
  <nav class="navbar navbar-expand-lg navbar-light">
    <a class="navbar-brand" href="https://blog.curso-r.com/"><img class="img-fluid" src="https://blog.curso-r.com/images/logo.webp" alt="Blog | Curso-R" width = "200px", height="100px"></a>
    <button class="navbar-toggler border-0" type="button" data-toggle="collapse" data-target="#navogation"
      aria-controls="navogation" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse text-center" id="navogation">
      <ul class="navbar-nav ml-auto">
        
        
        <li class="nav-item">
          <a class="nav-link text-uppercase text-dark" href="https://blog.curso-r.com/">Blog</a>
        </li>
        
        
        
        <li class="nav-item">
          <a class="nav-link text-uppercase text-dark" href="https://blog.curso-r.com/categories/desafio">Desafios</a>
        </li>
        
        
        
        <li class="nav-item">
          <a class="nav-link text-uppercase text-dark" href="https://www.curso-r.com/cursos">Cursos</a>
        </li>
        
        
        
        <li class="nav-item">
          <a class="nav-link text-uppercase text-dark" href="https://discourse.curso-r.com/">Fórum</a>
        </li>
        
        
        
        <li class="nav-item">
          <a class="nav-link text-uppercase text-dark" href="https://www.curso-r.com">Curso-R</a>
        </li>
        
        
      </ul>
      
      <!-- search -->
      <form class="form-inline position-relative ml-lg-4 form-searh" action="/search">
        <input class="form-control px-0" type="search" placeholder="" id="search-query" name="s">
        <button class="search-icon" type="submit"><i class="ti-search text-dark"></i></button>
      </form>
      
    </div>
  </nav>
</header>



<section class="section bg-posts" style = "background-image: url('https://blog.curso-r.com/images/posts/banner/seletor_vis_shiny.webp')">
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <h1 class = "titulo-post">Crie seletores de visualização no Shiny</h1>
      </div>
    </div>
  </div>
</section>



<section>
  <div class="container">
    <div class="row">
      <div class="col-lg-8">
        <ul class="list-inline d-flex justify-content-between py-3">
          <li class="list-inline-item">
            <i class="ti-user mr-2"></i>
            Escrito por
            
            
              <a href = "https://blog.curso-r.com/search/?s=William">William</a>
            
            em
            <a href="/categories/tutoriais">Tutoriais</a>
          </li>
          <li class="list-inline-item">
            <i class="ti-calendar mr-2"></i>
            1 de
            julho de
            2021
          </li>
        </ul>
        <ul class="list-inline tag-list">
          
            <li class="list-inline-item m-1"><a href="/tags/shiny">shiny</a></li>
            <li class="list-inline-item m-1"><a href="/tags/widgets">widgets</a></li>
        </ul>
        <article class="content">
          
            
<script src="/rmarkdown-libs/header-attrs/header-attrs.js"></script>


<p>Neste post, vamos mostrar como usar o widget <code>radioGroupButtons</code> do pacote <code>shinyWidgets</code> para construir um <a href="https://acursor.shinyapps.io/seletor-visualizacoes/">app com seletor de visualizações</a>, isto é, botões que mudam o tipo de visualização apresentada na tela.</p>
<p>Como exemplo, vamos construir um shiny app que mostra um gráfico de barras, um gráfico de linhas ou uma tabela (a depender da escolha da pessoa que estiver usando) do número de gols do Brasileirão<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> por temporada.</p>
<p>O primeiro passo é configurar o widget corretamente. Veja abaixo que o segredo é utilizar os argumentos <code>choiceValues</code> e <code>choiceNames</code>. Para o primeiro, passamos os valores que serão acessados dentro do <code>server</code> a depender da escolha na UI (equivalente ao argumento <code>choices</code>). Ao segundo, podemos passar tanto textos (que seriam escritos dentro do botão) quanto ícones. Nesse caso, utilizamos ícones da biblioteca <a href="https://fontawesome.com/">Font Awesome</a>, com ajuda da função <code>shiny::icon()</code>. Repare também que deixamos o tamanho dos botões um pouco maiores setando o argumento <code>size = "lg</code>.</p>
<pre class="r"><code>shinyWidgets::radioGroupButtons(
  inputId = &quot;vis_escolhida&quot;,
  label = &quot;&quot;,
  choiceValues = c(&quot;barras&quot;, &quot;linhas&quot;, &quot;tabela&quot;),
  choiceNames = list(
    icon(&quot;bar-chart&quot;),
    icon(&quot;line-chart&quot;),
    icon(&quot;table&quot;)
  ),
  size = &quot;lg&quot;,
  selected = &quot;barras&quot;
)</code></pre>
<p>Agora, precisamos construir a lógica do Output, tanto na UI como no server. Como a nossa visualização pode gerar gráficos ou uma tabela, precisaremos de funções <code>*Output()</code> e <code>render*()</code> diferentes. Dessa forma, vamos utilizar na nossa UI um <code>OutputUI()</code>.</p>
<pre class="r"><code># A nossa UI ficará assim
ui &lt;- fluidPage(
  fluidRow(
    column(
      width = 12,
      h1(&quot;App com seletor de visualizações&quot;)
    )
  ),
  br(),
  fluidRow(
    column(
      offset = 1,
      width = 11,
      shinyWidgets::radioGroupButtons(
        inputId = &quot;vis_escolhida&quot;,
        label = &quot;&quot;,
        choiceValues = c(&quot;barras&quot;, &quot;linhas&quot;, &quot;tabela&quot;),
        choiceNames = list(
          icon(&quot;bar-chart&quot;),
          icon(&quot;line-chart&quot;),
          icon(&quot;table&quot;)
        ),
        size = &quot;lg&quot;,
        selected = &quot;barras&quot;
      )
    )
  ),
  br(),
  fluidRow(
    column(
      width = 12,
      uiOutput(&quot;vis&quot;)
    )
  )
)</code></pre>
<p>Agora, no server, podemos criar funções <code>*Output()</code> diferentes a depender da visualização escolhida. Usamos <code>plotOutput()</code> para os gráficos e <code>reactable::reactableOutput()</code> para a tabela.</p>
<pre class="r"><code>output$vis &lt;- renderUI({
  if (input$vis_escolhida %in% c(&quot;barras&quot;, &quot;linhas&quot;)) {
    plotOutput(&quot;grafico&quot;)
  } else if (input$vis_escolhida == &quot;tabela&quot;) {
    reactable::reactableOutput(&quot;tabela&quot;)
  }
})</code></pre>
<p>Agora vamos construir nossas visualizações. Primeiro, vamos montar a base que precisamos para gerar tanto os gráficos quanto a tabela.</p>
<p>Os dados vêm do pacote <code>brasileirao</code>. Se você não possui esse pacote instalado, basta rodar o código abaixo:</p>
<pre class="r"><code>remotes::install_github(&quot;williamorim/brasileirao&quot;)</code></pre>
<p>Como a tabela que gera os gráficos não depende de nenhum valor ou expressão reativa, podemos colocar o código que a gera diretamente no server.</p>
<pre class="r"><code>tab &lt;- brasileirao::matches |&gt;
  dplyr::filter(
    score != &quot;x&quot;,
    season %in% 2006:2020
  ) |&gt;
  tidyr::separate(
    score,
    c(&quot;gols_casa&quot;, &quot;gols_visitante&quot;),
    sep = &quot;x&quot;,
    convert = TRUE
  ) |&gt;
  dplyr::mutate(
    gols = gols_casa + gols_visitante
  ) |&gt;
  dplyr::group_by(season) |&gt;
  dplyr::summarise(gols = sum(gols))</code></pre>
<p>Para gerar os gráficos, só precisamos de um <code>renderPlot()</code> e um <code>if/else</code> para devolver o gráfico certo.</p>
<pre class="r"><code>output$grafico &lt;- renderPlot({
  
  grafico_base &lt;- tab |&gt;
    ggplot(aes(x = season, y = gols)) +
    labs(x = &quot;Temporada&quot;, y = &quot;Número de gols&quot;) +
    theme_minimal() +
    ggtitle(&quot;Número de gols do Brasileirão por temporada&quot;)
  
  if (input$vis_escolhida == &quot;linhas&quot;) {
    grafico_base +
      geom_line(color = &quot;dark green&quot;)
  } else if (input$vis_escolhida == &quot;barras&quot;) {
    grafico_base +
      geom_col(width = 0.5, fill = &quot;dark green&quot;)
  }
})</code></pre>
<p>Para gerar a tabela, precisamos apenas de um <code>renderReactable()</code>.</p>
<pre class="r"><code>output$tabela &lt;- reactable::renderReactable({
  tab |&gt;
    reactable::reactable(
      fullWidth = FALSE,
      columns = list(
        season = reactable::colDef(
          name = &quot;Temporada&quot;
        ),
        gols = reactable::colDef(
          name = &quot;Número de gols&quot;
        )
      )
    )
})</code></pre>
<p>Juntando tudo, temos o app a seguir:</p>
<pre class="r"><code>library(shiny)
library(ggplot2)

ui &lt;- fluidPage(
  fluidRow(
    column(
      width = 12,
      h1(&quot;App com seletor de visualizações&quot;)
    )
  ),
  br(),
  fluidRow(
    column(
      offset = 1,
      width = 11,
      shinyWidgets::radioGroupButtons(
        inputId = &quot;vis_escolhida&quot;,
        label = &quot;&quot;,
        choiceValues = c(&quot;barras&quot;, &quot;linhas&quot;, &quot;tabela&quot;),
        choiceNames = list(
          icon(&quot;bar-chart&quot;),
          icon(&quot;line-chart&quot;),
          icon(&quot;table&quot;)
        ),
        size = &quot;lg&quot;,
        selected = &quot;barras&quot;
      )
    )
  ),
  br(),
  fluidRow(
    column(
      width = 12,
      uiOutput(&quot;vis&quot;)
    )
  )
)

server &lt;- function(input, output, session) {

  output$vis &lt;- renderUI({
    if (input$vis_escolhida %in% c(&quot;barras&quot;, &quot;linhas&quot;)) {
      plotOutput(&quot;grafico&quot;)
    } else if (input$vis_escolhida == &quot;tabela&quot;) {
      reactable::reactableOutput(&quot;tabela&quot;)
    }
  })

  tab &lt;- brasileirao::matches |&gt;
    dplyr::filter(
      score != &quot;x&quot;,
      season %in% 2006:2020
    ) |&gt;
    tidyr::separate(
      score,
      c(&quot;gols_casa&quot;, &quot;gols_visitante&quot;),
      sep = &quot;x&quot;,
      convert = TRUE
    ) |&gt;
    dplyr::mutate(
      gols = gols_casa + gols_visitante
    ) |&gt;
    dplyr::group_by(season) |&gt;
    dplyr::summarise(gols = sum(gols))

  output$grafico &lt;- renderPlot({

    grafico_base &lt;- tab |&gt;
      ggplot(aes(x = season, y = gols)) +
      labs(x = &quot;Temporada&quot;, y = &quot;Número de gols&quot;) +
      theme_minimal() +
      ggtitle(&quot;Número de gols do Brasileirão por temporada&quot;)

    if (input$vis_escolhida == &quot;linhas&quot;) {
      grafico_base +
        geom_line(color = &quot;dark green&quot;)
    } else if (input$vis_escolhida == &quot;barras&quot;) {
      grafico_base +
        geom_col(width = 0.5, fill = &quot;dark green&quot;)
    }
  })

  output$tabela &lt;- reactable::renderReactable({
    tab |&gt;
      reactable::reactable(
        fullWidth = FALSE,
        columns = list(
          season = reactable::colDef(
            name = &quot;Temporada&quot;
          ),
          gols = reactable::colDef(
            name = &quot;Número de gols&quot;
          )
        )
      )
  })
}

shinyApp(ui, server)</code></pre>
<p>É isso! Dúvidas, sugestões e críticas, mande aqui nos comentários.</p>
<p>Até a próxima!</p>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>Campeonato Brasileiro de futebol da Série A.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
</ol>
</div>

          
        </article>
        
  <div class="disqus-comments">
    <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "curso-r-com" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  </div>


      </div>
      <div class="col-lg-1">
</div>
<div class="col-lg-3">
  
  <div class="widget">
    <h4 class="mb-4">POSTS MAIS RECENTES</h4>
    
    <div class="media mb-4">
      <div class="post-thumb-sm mr-3">
        <a href="https://blog.curso-r.com/posts/2022-07-29-rstudio-conf-2022-dia2/"><img class="mr-3 post-thumb-sm" src="https://blog.curso-r.com/images/posts/banner/rstudio-conf-2022.png"></a>
      </div>
      <div class="media-body">
        <h5><a class="text-dark" href="https://blog.curso-r.com/posts/2022-07-29-rstudio-conf-2022-dia2/">rstudio::conf 2022, segundo dia de palestras</a></h5>
        <p>Por Julio em <a href="/categories/divulga%c3%a7%c3%a3o">Divulgação</a></p>
      </div>
    </div>
    
    <div class="media mb-4">
      <div class="post-thumb-sm mr-3">
        <a href="https://blog.curso-r.com/posts/2022-07-27-rstudio-conf-2022/"><img class="mr-3 post-thumb-sm" src="https://blog.curso-r.com/images/posts/banner/rstudio-conf-2022.png"></a>
      </div>
      <div class="media-body">
        <h5><a class="text-dark" href="https://blog.curso-r.com/posts/2022-07-27-rstudio-conf-2022/">rstudio::conf 2022, primeiro dia de palestras</a></h5>
        <p>Por Julio em <a href="/categories/divulga%c3%a7%c3%a3o">Divulgação</a></p>
      </div>
    </div>
    
    <div class="media mb-4">
      <div class="post-thumb-sm mr-3">
        <a href="https://blog.curso-r.com/posts/2022-07-15-vscode-server/"><img class="mr-3 post-thumb-sm" src="https://blog.curso-r.com/images/posts/banner/vscode-server.webp"></a>
      </div>
      <div class="media-body">
        <h5><a class="text-dark" href="https://blog.curso-r.com/posts/2022-07-15-vscode-server/">Acesso Remoto ao VS Code</a></h5>
        <p>Por Caio em <a href="/categories/tutoriais">Tutoriais</a></p>
      </div>
    </div>
    
  </div>
  <div class="widget">
    <h4 class="mb-4">LEIA MAIS SOBRE</h4>
    <ul class="list-inline tag-list">
      <li class="list-inline-item m-1"><a href="/categories/an%c3%a1lises">Análises</a></li>
      <li class="list-inline-item m-1"><a href="/categories/boas-pr%c3%a1ticas">Boas práticas</a></li>
      <li class="list-inline-item m-1"><a href="/categories/conceitos">Conceitos</a></li>
      <li class="list-inline-item m-1"><a href="/categories/debugging">Debugging</a></li>
      <li class="list-inline-item m-1"><a href="/categories/desafio">Desafio</a></li>
      <li class="list-inline-item m-1"><a href="/categories/discuss%c3%b5es">Discussões</a></li>
      <li class="list-inline-item m-1"><a href="/categories/divulga%c3%a7%c3%a3o">Divulgação</a></li>
      <li class="list-inline-item m-1"><a href="/categories/erros">Erros</a></li>
      <li class="list-inline-item m-1"><a href="/categories/pacotes">Pacotes</a></li>
      <li class="list-inline-item m-1"><a href="/categories/r">R</a></li>
      <li class="list-inline-item m-1"><a href="/categories/top-10">Top 10</a></li>
      <li class="list-inline-item m-1"><a href="/categories/tutoriais">Tutoriais</a></li>
      <li class="list-inline-item m-1"><a href="/categories/tutorial">Tutorial</a></li>
    </ul>
  </div>
</div>

    </div>
  </div>
</section>




<footer class="bg-footer" style = "background-image: url('https://blog.curso-r.com/images/footerImage.webp')">
  <div class="section">
    <div class="container">
      <div class="row">
        <div class="col-md-3 col-sm-6 mb-4 mb-md-0">
          <a href="https://www.curso-r.com"><img src="https://blog.curso-r.com/images/footerLogo.webp" alt="Blog | Curso-R" class="img-fluid"></a>
        </div>
        <div class="col-md-3 col-sm-6 mb-4 mb-md-0">
          
          <h6>Dúvidas de R?</h6>
          <ul class="list-unstyled">
            <li class="font-secondary text-dark"><a href="https://discourse.curso-r.com/">Acesse nosso fórum</a></li>
          </ul>
          
        </div>
        <div class="col-md-3 col-sm-6 mb-4 mb-md-0">
          
          <h6>Fale com a gente</h6>
          <ul class="list-unstyled">
            
            
            <li class="font-secondary text-dark"><a href="mailto:contato@curso-r.com">contato@curso-r.com</a></li>
            
          </ul>
          
        </div>
        <div class="col-md-3 col-sm-6 mb-4 mb-md-0">
          <h6>Siga a Curso-R</h6>
          <ul class="list-inline d-inline-block">
            
            <li class="list-inline-item"><a href="https://github.com/curso-r" class="text-dark" target = "_blank"><i class="ti-github"></i></a></li>
            
            <li class="list-inline-item"><a href="https://twitter.com/curso_r" class="text-dark" target = "_blank"><i class="ti-twitter-alt"></i></a></li>
            
            <li class="list-inline-item"><a href="https://www.instagram.com/cursoo_r/" class="text-dark" target = "_blank"><i class="ti-instagram"></i></a></li>
            
            <li class="list-inline-item"><a href="https://br.linkedin.com/company/curso-r" class="text-dark" target = "_blank"><i class="ti-linkedin"></i></a></li>
            
            <li class="list-inline-item"><a href="https://www.facebook.com/cursodeR/" class="text-dark" target = "_blank"><i class="ti-facebook"></i></a></li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>
    <div class="text-center pb-3 copyright">
        <h6 class="mb-0">Copyright © 2021 Curso-R</h6>
        <p class="mb-0" style = "font-size: 0.8em;"> Site feito em <a href = "https://gohugo.io/" target = "_blank">Hugo</a>, com o pacote <a href = "https://bookdown.org/yihui/blogdown/" target = "_blank">Blogdown</a>. Tema por <a href = "https://themefisher.com/" target = "_blank">Themefisher</a>.</p>
    </div>
</footer>



<script>
  var indexURL = "https://blog.curso-r.com/index.json"
</script>


<!-- JS Plugins -->

<script src="https://blog.curso-r.com/plugins/jQuery/jquery.min.js"></script>

<script src="https://blog.curso-r.com/plugins/bootstrap/bootstrap.min.js"></script>

<script src="https://blog.curso-r.com/plugins/slick/slick.min.js"></script>

<script src="https://blog.curso-r.com/plugins/headroom/headroom.js"></script>

<script src="https://blog.curso-r.com/plugins/instafeed/instafeed.min.js"></script>

<script src="https://blog.curso-r.com/plugins/masonry/masonry.js"></script>

<script src="https://blog.curso-r.com/plugins/reading-time/readingTime.min.js"></script>

<script src="https://blog.curso-r.com/plugins/smooth-scroll/smooth-scroll.js"></script>

<script src="https://blog.curso-r.com/plugins/search/fuse.min.js"></script>

<script src="https://blog.curso-r.com/plugins/search/mark.js"></script>

<script src="https://blog.curso-r.com/plugins/search/search.js"></script>

<script src="https://blog.curso-r.com/js/highlight.pack.js"></script>


<script>hljs.initHighlightingOnLoad();</script>

<script type="text/javascript"
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

<!-- Main Script -->

<script src="https://blog.curso-r.com/js/script.min.js"></script>

<!-- google analitycs -->

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-87272102-2', 'auto');
  ga('send', 'pageview');
</script>





</body>
</html>