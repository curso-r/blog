<!DOCTYPE html>
<html lang="pt-br"><head>
  <meta charset="utf-8">

  
  <title>Uma maneira prática de encontrar outliers nos seus dados</title>
  <meta name="title" content="Uma maneira prática de encontrar outliers nos seus dados">
  <meta name="description" content="Você já passou pela situação de fazer um gráfico e se deparar com um monte de pontos bizarros? Quando você nem seguer consegue ver o que está acontecendo porque um ponto está deixando a sua escala completamente bagunçada? Hoje, nós vamos falar sobre uma estratégia rápida e fácil que tem o potencial de te ajudar a encontrar todos os seus outliers sem ter dor de cabeça.">

  
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://blog.curso-r.com/posts/2021-04-15-como-encontrar-outliers/">
  <meta property="og:title" content="Uma maneira prática de encontrar outliers nos seus dados">
  <meta property="og:description" content="Você já passou pela situação de fazer um gráfico e se deparar com um monte de pontos bizarros? Quando você nem seguer consegue ver o que está acontecendo porque um ponto está deixando a sua escala completamente bagunçada? Hoje, nós vamos falar sobre uma estratégia rápida e fácil que tem o potencial de te ajudar a encontrar todos os seus outliers sem ter dor de cabeça.">
  <meta property="og:image" content="https://blog.curso-r.com/images/posts/banner/outlier.webp?nf_resize=fit&w=300">

  
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://blog.curso-r.com/posts/2021-04-15-como-encontrar-outliers/">
  <meta property="twitter:title" content="Uma maneira prática de encontrar outliers nos seus dados">
  <meta property="twitter:description" content="Você já passou pela situação de fazer um gráfico e se deparar com um monte de pontos bizarros? Quando você nem seguer consegue ver o que está acontecendo porque um ponto está deixando a sua escala completamente bagunçada? Hoje, nós vamos falar sobre uma estratégia rápida e fácil que tem o potencial de te ajudar a encontrar todos os seus outliers sem ter dor de cabeça.">
  <meta property="twitter:image" content="https://blog.curso-r.com/images/posts/banner/outlier.webp">

  <!-- mobile responsive meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta name="generator" content="Hugo 0.85.0" />

  <!-- plugins -->
  
  <link rel="stylesheet" href="https://blog.curso-r.com/plugins/bootstrap/bootstrap.min.css ">
  
  <link rel="stylesheet" href="https://blog.curso-r.com/plugins/slick/slick.css ">
  
  <link rel="stylesheet" href="https://blog.curso-r.com/plugins/themify-icons/themify-icons.css ">
  
  <link rel="stylesheet" href="https://blog.curso-r.com/css/custom.css ">
  
  <link rel="stylesheet" href="https://blog.curso-r.com/css/github.css ">
  

  <!-- Main Stylesheet -->
  
  <link rel="stylesheet" href="https://blog.curso-r.com/css/style.min.css" media="screen">

  <!--Favicon-->
  <link rel="shortcut icon" href="https://blog.curso-r.com/images/favicon.png " type="image/x-icon">
  <link rel="icon" href="https://blog.curso-r.com/images/favicon.png " type="image/x-icon">
</head>
<body>
<!-- preloader start -->
<div class="preloader">
  <div class="loader">
    <span class="dot"></span>
    <div class="dots">
      <span></span>
      <span></span>
      <span></span>
    </div>
  </div>
</div>
<!-- preloader end -->
<header class="navigation">
  <nav class="navbar navbar-expand-lg navbar-light">
    <a class="navbar-brand" href="https://blog.curso-r.com/"><img class="img-fluid" src="https://blog.curso-r.com/images/logo.webp" alt="Blog | Curso-R" width = "200px", height="100px"></a>
    <button class="navbar-toggler border-0" type="button" data-toggle="collapse" data-target="#navogation"
      aria-controls="navogation" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse text-center" id="navogation">
      <ul class="navbar-nav ml-auto">
        
        
        <li class="nav-item">
          <a class="nav-link text-uppercase text-dark" href="https://blog.curso-r.com/">Blog</a>
        </li>
        
        
        
        <li class="nav-item">
          <a class="nav-link text-uppercase text-dark" href="https://blog.curso-r.com/categories/desafio">Desafios</a>
        </li>
        
        
        
        <li class="nav-item">
          <a class="nav-link text-uppercase text-dark" href="https://www.curso-r.com/cursos">Cursos</a>
        </li>
        
        
        
        <li class="nav-item">
          <a class="nav-link text-uppercase text-dark" href="https://discourse.curso-r.com/">Fórum</a>
        </li>
        
        
        
        <li class="nav-item">
          <a class="nav-link text-uppercase text-dark" href="https://www.curso-r.com">Curso-R</a>
        </li>
        
        
      </ul>
      
      <!-- search -->
      <form class="form-inline position-relative ml-lg-4 form-searh" action="/search">
        <input class="form-control px-0" type="search" placeholder="" id="search-query" name="s">
        <button class="search-icon" type="submit"><i class="ti-search text-dark"></i></button>
      </form>
      
    </div>
  </nav>
</header>



<section class="section bg-posts" style = "background-image: url('https://blog.curso-r.com/images/posts/banner/outlier.webp')">
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <h1 class = "titulo-post">Uma maneira prática de encontrar outliers nos seus dados</h1>
      </div>
    </div>
  </div>
</section>



<section>
  <div class="container">
    <div class="row">
      <div class="col-lg-8">
        <ul class="list-inline d-flex justify-content-between py-3">
          <li class="list-inline-item">
            <i class="ti-user mr-2"></i>
            Escrito por
            
            
              <a href = "https://blog.curso-r.com/search/?s=Fernando">Fernando</a>
            
            em
            <a href="/categories/an%c3%a1lises">Análises</a>
          </li>
          <li class="list-inline-item">
            <i class="ti-calendar mr-2"></i>
            15 de
            abril de
            2021
          </li>
        </ul>
        <ul class="list-inline tag-list">
          
            <li class="list-inline-item m-1"><a href="/tags/base-de-dados">base de dados</a></li>
        </ul>
        <article class="content">
          
            
<script src="/rmarkdown-libs/header-attrs/header-attrs.js"></script>


<p><img src="/posts/2021-04-15-como-encontrar-outliers_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>Você já passou pela situação de fazer um gráfico e se deparar com uma imagem triste como essa? Quando você nem sequer consegue ver o que está acontecendo porque um ponto está deixando a sua escala completamente bagunçada?</p>
<p>Esses dados que dificultam a nossa vida normalmente são chamados de <em>outliers</em> ou também de <em>dados discrepantes</em> e <em>pontos fora da curva</em>. Existem muitos jeitos de tratar esse tipo de dados, pois se por um lado ele pode ser um erro da base e deve ser descartado, também existem situações em que os outliers são características importantes dos seus dados e merecem ser compreendidos em profundidade. Hoje, nós vamos falar sobre uma estratégia rápida e fácil que tem o potencial de resolver os seus problemas sem te dar dor de cabeça.</p>
<p>O método mais comum para encontrar <em>outliers</em> usa o famoso z-score, que nada mais é que uma transformação de uma variável <span class="math inline">\(X\)</span> que padroniza a sua <strong>posição</strong> (pois a média do z-score é sempre 0, enquanto a média de <span class="math inline">\(X\)</span> pode ser qualquer coisa) e a sua <strong>escala</strong> (pois <span class="math inline">\(X\)</span> pode variar muito ou pouco, com qualquer desvio padrão, mas o z-score não. o z-score terá sempre desvio padrão igual a 1). A fórmula do z-score é:</p>
<p><span class="math display">\[Z_{SCORE} (X) = \frac{X-Média(X)}{Desvio Padrão (X)}\]</span></p>
<p>Uma estratégia para encontrar outliers, então, é marcar aqueles pontos que, nessa escala, estão muito discrepantes. Normalmente se adota um ponto de corte pequeno, como -2 e 2 ou no máximo -3 e 3. Serão considerados <em>outliers</em> todos os pontos que estiverem fora desse intervalo.</p>
<p>Vamos ver o que aconteceria se usássemos essa regra para arrumar o primeiro gráfico que mostramos? Primeiro, vamos criar uma base de dados onde poderemos trabalhar. Ela se chamará <code>mtcars_com_outliers</code>, como se vê abaixo.</p>
<pre class="r"><code>mtcars_com_outliers &lt;- mtcars %&gt;% 
  # aqui vamos incluir os pontos bizarros...
  dplyr::bind_rows(
    tibble::tibble(
      mpg = c(0.1, 1039, 481, 1402),
      wt = c(3.21, 1.8230, 2.6740, 3.6720)
    )
  ) </code></pre>
<p>Agora, vamos criar uma coluna <code>e_outlier</code> que vai nos dizer se estamos falando de um outlier ou não. Para não perder a viagem, também vamos fazer um gráfico que ajude a identificar visualmente os pontos que podem ser outliers.</p>
<pre class="r"><code>mtcars_com_outliers %&gt;% 
  dplyr::mutate(
    z_score_mpg = (mpg-mean(mpg))/sd(mpg),
    e_outlier_mpg = dplyr::if_else(abs(z_score_mpg) &gt; 2, &quot;É outlier&quot;, &quot;Não é outlier&quot;)
  ) %&gt;% 
  ggplot2::ggplot(ggplot2::aes(x = wt, y = mpg, color = e_outlier_mpg)) +
  ggplot2::geom_point(size = 3) +
  ggplot2::theme_minimal(15) +
  ggplot2::labs(x = &quot;Peso do carro&quot;, y = &quot;Consumo de combustível (milhas/galão)&quot;, color = &quot;&quot;)</code></pre>
<p><img src="/posts/2021-04-15-como-encontrar-outliers_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>Usamos o ponto de corte 2 e parece que um <em>outlier</em> ficou de fora, né? Vamos diminuir um pouco o ponto de corte e ver se a gente consegue pegar esse que ficou fora.</p>
<pre class="r"><code>mtcars_com_outliers %&gt;% 
  dplyr::mutate(
    z_score_mpg = (mpg-mean(mpg))/sd(mpg),
    e_outlier_mpg = dplyr::if_else(abs(z_score_mpg) &gt; 1, &quot;É outlier&quot;, &quot;Não é outlier&quot;)
  ) %&gt;% 
  ggplot2::ggplot(ggplot2::aes(x = wt, y = mpg, color = e_outlier_mpg)) +
  ggplot2::geom_point(size = 3) +
  ggplot2::theme_minimal(15) +
  ggplot2::labs(x = &quot;Peso do carro&quot;, y = &quot;Consumo de combustível (milhas/galão)&quot;, color = &quot;&quot;)</code></pre>
<p><img src="/posts/2021-04-15-como-encontrar-outliers_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>Conseguimos! Vamos fazer um novo plot para analisar os dados do jeito que a gente gostaria de ter feito desde o começo, se não fossem esses outliers chatos.</p>
<pre class="r"><code>mtcars_com_outliers %&gt;% 
  dplyr::mutate(
    z_score_mpg = (mpg-mean(mpg))/sd(mpg),
    e_outlier_mpg = dplyr::if_else(abs(z_score_mpg) &gt; 1, &quot;É outlier&quot;, &quot;Não é outlier&quot;)
  ) %&gt;% 
  dplyr::filter(e_outlier_mpg == &quot;Não é outlier&quot;) %&gt;% 
  ggplot2::ggplot(ggplot2::aes(x = wt, y = mpg)) +
  ggplot2::geom_point(size = 3) +
  ggplot2::theme_minimal(15) +
  ggplot2::labs(x = &quot;Peso do carro&quot;, y = &quot;Consumo de combustível (milhas/galão)&quot;, color = &quot;&quot;)</code></pre>
<p><img src="/posts/2021-04-15-como-encontrar-outliers_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>Agora parece que tem mais um, o que é que a gente faz? A gente até poderia repetir o processo: rodar o z-score nessa base filtrada, experimentar alguns cortes, refazer os gráfico e seguir até não conseguirmos identificar nenhum outro outlier. Mas isso não parece escalar muito bem, né?</p>
<p>E se eu te dissesse que tem uma pequena modificação que a gente pode fazer no z-score que simplifica o nosso trabalho? Pois tem, e é o que normalmente se chama de z-score robusto. A fórmula é só um pouquinho diferente:</p>
<p><span class="math display">\[Z_{SCORE}\ ROBUSTO(X) = \frac{X-Mediana(X)}{MAD(X)}\]</span>
Se você comparar essa fórmula com a outra que postamos lá em cima, duas coisas mudaram: a média virou mediana e o desvio padrão virou MAD. O MAD é um pouco menos conhecido que a mediana, mas ele está para o desvio padrão assim como a média está para a mediana. Essas duas medidas, o MAD e a mediana, são mais robustas do que a média e o desvio padrão, respectivamente, porque consideram a estatística de ordem central, ao invés de tomar uma média de todos os dados ou, no caso do desvio padrão, uma média de todos os desvio quadráticos. Por conta desse comportamento baseado em estatísticas de ordem, o z-score robusto se comporta muito melhor do que o z-score comum, principalmente quando o assunto é encontrar outliers. De resto, vamos fazer mais ou menos a mesma coisa que fizemos antes: escolher um corte e seguir. Podemos inclusive começar escolhendo 2 ou 3 para ver o que acontece:</p>
<pre class="r"><code>mtcars_com_outliers %&gt;% 
  dplyr::mutate(
    z_score_mpg = (mpg-median(mpg))/mad(mpg),
    e_outlier_mpg = dplyr::if_else(abs(z_score_mpg) &gt; 3, &quot;É outlier&quot;, &quot;Não é outlier&quot;)
  ) %&gt;% 
  ggplot2::ggplot(ggplot2::aes(x = wt, y = mpg, color = e_outlier_mpg)) +
  ggplot2::geom_point(size = 3) +
  ggplot2::theme_minimal(15) +
  ggplot2::labs(x = &quot;Peso do carro&quot;, y = &quot;Consumo de combustível (milhas/galão)&quot;, color = &quot;&quot;)</code></pre>
<p><img src="/posts/2021-04-15-como-encontrar-outliers_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>E olha só que beleza, encontramos todos os outliers, sem precisar fazer o próximo gráfico! Legal né?</p>
<p>Conta pra gente aí nos comentários se você já conhecia o z-score robusto e o MAD.</p>
<div id="gostou-quer-saber-mais" class="section level1">
<h1>Gostou? Quer saber mais?</h1>
<p>Se você quiser aprender um pouco mais sobre manipulação de dados com R, dê uma olhada no nosso curso <a href="https://curso-r.com/cursos/r4ds-1/">R para Ciência de Dados I</a> e aproveite!</p>
<p>Caso você tenha dúvidas entre em contato com a gente pelos comentários aqui embaixo, pelo nosso Discourse ou pelo e-mail <a href="mailto:contato@curso-r.com" class="email">contato@curso-r.com</a>.</p>
</div>

          
        </article>
        
  <div class="disqus-comments">
    <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "curso-r-com" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  </div>


      </div>
      <div class="col-lg-1">
</div>
<div class="col-lg-3">
  
  <div class="widget">
    <h4 class="mb-4">POSTS MAIS RECENTES</h4>
    
    <div class="media mb-4">
      <div class="post-thumb-sm mr-3">
        <a href="https://blog.curso-r.com/posts/2023-04-15-submodulos/"><img class="mr-3 post-thumb-sm" src="https://blog.curso-r.com/images/posts/banner/submodulos.webp"></a>
      </div>
      <div class="media-body">
        <h5><a class="text-dark" href="https://blog.curso-r.com/posts/2023-04-15-submodulos/">Submódulos no Git</a></h5>
        <p>Por Caio em <a href="/categories/tutoriais">Tutoriais</a></p>
      </div>
    </div>
    
    <div class="media mb-4">
      <div class="post-thumb-sm mr-3">
        <a href="https://blog.curso-r.com/posts/2023-04-14-indexacao/"><img class="mr-3 post-thumb-sm" src="https://blog.curso-r.com/images/posts/banner/indexacao.webp"></a>
      </div>
      <div class="media-body">
        <h5><a class="text-dark" href="https://blog.curso-r.com/posts/2023-04-14-indexacao/">Indexando listas no R</a></h5>
        <p>Por Caio em <a href="/categories/tutoriais">Tutoriais</a></p>
      </div>
    </div>
    
    <div class="media mb-4">
      <div class="post-thumb-sm mr-3">
        <a href="https://blog.curso-r.com/posts/2023-04-12-ocr/"><img class="mr-3 post-thumb-sm" src="https://blog.curso-r.com/images/posts/banner/pdf-to-text.webp"></a>
      </div>
      <div class="media-body">
        <h5><a class="text-dark" href="https://blog.curso-r.com/posts/2023-04-12-ocr/">PDF e OCR (atualizado!)</a></h5>
        <p>Por Julio em <a href="/categories/tutoriais">Tutoriais</a></p>
      </div>
    </div>
    
  </div>
  <div class="widget">
    <h4 class="mb-4">LEIA MAIS SOBRE</h4>
    <ul class="list-inline tag-list">
      <li class="list-inline-item m-1"><a href="/categories/an%c3%a1lises">Análises</a></li>
      <li class="list-inline-item m-1"><a href="/categories/boas-pr%c3%a1ticas">Boas práticas</a></li>
      <li class="list-inline-item m-1"><a href="/categories/conceitos">Conceitos</a></li>
      <li class="list-inline-item m-1"><a href="/categories/debugging">Debugging</a></li>
      <li class="list-inline-item m-1"><a href="/categories/desafio">Desafio</a></li>
      <li class="list-inline-item m-1"><a href="/categories/discuss%c3%b5es">Discussões</a></li>
      <li class="list-inline-item m-1"><a href="/categories/divulga%c3%a7%c3%a3o">Divulgação</a></li>
      <li class="list-inline-item m-1"><a href="/categories/erros">Erros</a></li>
      <li class="list-inline-item m-1"><a href="/categories/pacotes">Pacotes</a></li>
      <li class="list-inline-item m-1"><a href="/categories/r">R</a></li>
      <li class="list-inline-item m-1"><a href="/categories/top-10">Top 10</a></li>
      <li class="list-inline-item m-1"><a href="/categories/tutoriais">Tutoriais</a></li>
      <li class="list-inline-item m-1"><a href="/categories/tutorial">Tutorial</a></li>
    </ul>
  </div>
</div>

    </div>
  </div>
</section>




<footer class="bg-footer" style = "background-image: url('https://blog.curso-r.com/images/footerImage.webp')">
  <div class="section">
    <div class="container">
      <div class="row">
        <div class="col-md-3 col-sm-6 mb-4 mb-md-0">
          <a href="https://www.curso-r.com"><img src="https://blog.curso-r.com/images/footerLogo.webp" alt="Blog | Curso-R" class="img-fluid"></a>
        </div>
        <div class="col-md-3 col-sm-6 mb-4 mb-md-0">
          
          <h6>Dúvidas de R?</h6>
          <ul class="list-unstyled">
            <li class="font-secondary text-dark"><a href="https://discourse.curso-r.com/">Acesse nosso fórum</a></li>
          </ul>
          
        </div>
        <div class="col-md-3 col-sm-6 mb-4 mb-md-0">
          
          <h6>Fale com a gente</h6>
          <ul class="list-unstyled">
            
            
            <li class="font-secondary text-dark"><a href="mailto:contato@curso-r.com">contato@curso-r.com</a></li>
            
          </ul>
          
        </div>
        <div class="col-md-3 col-sm-6 mb-4 mb-md-0">
          <h6>Siga a Curso-R</h6>
          <ul class="list-inline d-inline-block">
            
            <li class="list-inline-item"><a href="https://github.com/curso-r" class="text-dark" target = "_blank"><i class="ti-github"></i></a></li>
            
            <li class="list-inline-item"><a href="https://twitter.com/curso_r" class="text-dark" target = "_blank"><i class="ti-twitter-alt"></i></a></li>
            
            <li class="list-inline-item"><a href="https://www.instagram.com/cursoo_r/" class="text-dark" target = "_blank"><i class="ti-instagram"></i></a></li>
            
            <li class="list-inline-item"><a href="https://br.linkedin.com/company/curso-r" class="text-dark" target = "_blank"><i class="ti-linkedin"></i></a></li>
            
            <li class="list-inline-item"><a href="https://www.facebook.com/cursodeR/" class="text-dark" target = "_blank"><i class="ti-facebook"></i></a></li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>
    <div class="text-center pb-3 copyright">
        <h6 class="mb-0">Copyright © 2021 Curso-R</h6>
        <p class="mb-0" style = "font-size: 0.8em;"> Site feito em <a href = "https://gohugo.io/" target = "_blank">Hugo</a>, com o pacote <a href = "https://bookdown.org/yihui/blogdown/" target = "_blank">Blogdown</a>. Tema por <a href = "https://themefisher.com/" target = "_blank">Themefisher</a>.</p>
    </div>
</footer>



<script>
  var indexURL = "https://blog.curso-r.com/index.json"
</script>


<!-- JS Plugins -->

<script src="https://blog.curso-r.com/plugins/jQuery/jquery.min.js"></script>

<script src="https://blog.curso-r.com/plugins/bootstrap/bootstrap.min.js"></script>

<script src="https://blog.curso-r.com/plugins/slick/slick.min.js"></script>

<script src="https://blog.curso-r.com/plugins/headroom/headroom.js"></script>

<script src="https://blog.curso-r.com/plugins/instafeed/instafeed.min.js"></script>

<script src="https://blog.curso-r.com/plugins/masonry/masonry.js"></script>

<script src="https://blog.curso-r.com/plugins/reading-time/readingTime.min.js"></script>

<script src="https://blog.curso-r.com/plugins/smooth-scroll/smooth-scroll.js"></script>

<script src="https://blog.curso-r.com/plugins/search/fuse.min.js"></script>

<script src="https://blog.curso-r.com/plugins/search/mark.js"></script>

<script src="https://blog.curso-r.com/plugins/search/search.js"></script>

<script src="https://blog.curso-r.com/js/highlight.pack.js"></script>

<script src="https://platform.illow.io/banner.js?siteId=962b4071-1b48-4756-8b80-68101acc70df"></script>


<script>hljs.initHighlightingOnLoad();</script>

<script type="text/javascript"
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

<!-- Main Script -->

<script src="https://blog.curso-r.com/js/script.min.js"></script>

<!-- google analitycs -->

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-87272102-2', 'auto');
  ga('send', 'pageview');
</script>





</body>
</html>