---
title: "Advent of R: Dia 05"
date: "2021-12-05"
tags: ["advent-of-r", "tidyverse"]
categories: ["Tutoriais"]
image: "images/posts/banner/advent-of-r-05.png"
author: ["Caio"]
summary: "Resolvendo o Advent of Code 2021 com R: Dia 05."
draft: false
---

<script src="/rmarkdown-libs/header-attrs/header-attrs.js"></script>


<p>O <a href="https://adventofcode.com">Advent of Code</a> é um
<a href="https://pt.wikipedia.org/wiki/Calend%C3%A1rio_do_Advento">Calendário do Advento</a>
desenvolvido por <a href="https://github.com/topaz">Eric Wastl</a> composto por 25
pequenos exercícios de programação que vão sendo disponibilizados, um a um,
entre 1º de dezembro e o Natal de cada ano.</p>
<p>Meu objetivo com o <strong>Advent of R</strong> é resolver todos os problemas do
<a href="https://adventofcode.com/2021">Advent of Code 2021</a> em R e documentar o
processo através desta
<a href="https://blog.curso-r.com/tags/advent-of-r/">série de posts</a>. Todo dia entre
01/12/2021 e 25/12/2021 eu vou tentar resolver o novo problema, documentar a
minha solução aqui no blog e subir os meus scripts completos para um
<a href="https://github.com/curso-r/advent-of-r">repositório público</a> no GitHub.</p>
<p>A minha esperança é que, com essa série, mais pessoas pratiquem seus
conhecimentos de R resolvendo exercícios divertidos e desafiadores! Ao final
da jornada vamos todos ter afiado nossas habilidades de R e, quem sabe,
divulgado essa linguagem incrível para mais pessoas. Boas festas e bom código!</p>
<div id="aventura-hidrotermal-a" class="section level2">
<h2>Aventura Hidrotermal (A)</h2>
<p>O <a href="https://adventofcode.com/2021/day/3">quinto dia</a> do AoC foi um pouco mais
tranquilo do que o anterior porque eu tive ajuda da incrível
<a href="https://twitter.com/renata_mh">Renata Hirota</a>. Hoje tínhamos as coordenadas
cartesianas do início e do fim de tubulações submarinas e o objetivo era
descobrir quantos pontos do plano tinham mais de uma tubulação passando por
eles. No primeiro item deveríamos considerar apenas as tubulações verticais e
horizontais.</p>
<ul>
<li><p>Uma entrada do tipo <code>1,1 -&gt; 1,3</code> cobria os pontos <code>1,1</code>, <code>1,2</code> e <code>1,3</code>.</p></li>
<li><p>Uma entrada do tipo <code>9,7 -&gt; 7,7</code> cobria os pontos <code>9,7</code>, <code>8,7</code> e <code>7,7</code>.</p></li>
</ul>
<p>A minha ideia começava filtrando os pontos em que <code>x1 == x2</code> ou <code>y1 == y2</code> e
expandindo as coordenadas para criar uma lista que contivesse todos os pontos
pelos quais as tubulações passavam. Eu resolvi isso com o <code>paste(x1:x2, y1:y2)</code>,
pois a <code>paste()</code> repetiria a coordenada que não muda ao longo da coordenada que
muda: <code>paste(9:7, 7:7) := "9 7" "8 7" "7 7"</code>.</p>
<p>Depois disso bastava contar o números de ocorrências de cada ponto do plano,
filtrar aqueles que ocorriam mais de 1 vez e contar quantos pontos restavam.
Esta era a saída do problema.</p>
<pre class="r"><code>&quot;data-raw/05a_hydrothermal_venture.txt&quot; |&gt;
  readr::read_csv(col_names = c(&quot;x1&quot;, &quot;y1x2&quot;, &quot;y2&quot;)) |&gt;
  tidyr::separate(sep = &quot; -&gt; &quot;, col = &quot;y1x2&quot;, into = c(&quot;y1&quot;, &quot;x2&quot;)) |&gt;
  dplyr::filter(x1 == x2 | y1 == y2) |&gt;
  dplyr::mutate(
    dif_x = purrr::map2(x1, x2, seq),
    dif_y = purrr::map2(y1, y2, seq),
    coord = purrr::map2(dif_x, dif_y, paste)
  ) |&gt;
  tidyr::unnest(coord) |&gt;
  dplyr::count(coord) |&gt;
  dplyr::filter(n &gt; 1) |&gt;
  nrow()
#&gt; [1] 7142</code></pre>
</div>
<div id="aventura-hidrotermal-b" class="section level2">
<h2>Aventura Hidrotermal (B)</h2>
<p>O segundo item parecia bastante mais complexo, pois agora deveríamos considerar
todas as tubulações da entrada, removendo o <code>dplyr::filter()</code> do item anterior.
Mas uma especificação do enunciado facilitou tudo: todas as linhas diagonais
tinham inclinação de 45 graus.</p>
<ul>
<li><p>Uma entrada do tipo <code>1,1 -&gt; 3,3</code> cobria os pontos <code>1,1</code>, <code>2,2</code> e <code>3,3</code>.</p></li>
<li><p>Uma entrada do tipo <code>9,7 -&gt; 7,9</code> cobria os pontos <code>9,7</code>, <code>8,8</code> e <code>7,9</code>.</p></li>
</ul>
<p>Isso significa que a estratégia do <code>paste()</code> continuava funcionando! Note que
<code>paste(1:3, 1:3) := "1 1" "2 2" "3 3"</code>, então bastou tirar o <code>dplyr::filter()</code>
que a solução estava pronta.</p>
<pre class="r"><code>&quot;data-raw/05b_hydrothermal_venture.txt&quot; |&gt;
  readr::read_csv(col_names = c(&quot;x1&quot;, &quot;y1x2&quot;, &quot;y2&quot;)) |&gt;
  tidyr::separate(sep = &quot; -&gt; &quot;, col = &quot;y1x2&quot;, into = c(&quot;y1&quot;, &quot;x2&quot;)) |&gt;
  dplyr::mutate(
    dif_x = purrr::map2(x1, x2, seq),
    dif_y = purrr::map2(y1, y2, seq),
    coord = purrr::map2(dif_x, dif_y, paste)
  ) |&gt;
  tidyr::unnest(coord) |&gt;
  dplyr::count(coord) |&gt;
  dplyr::filter(n &gt; 1) |&gt;
  nrow()
#&gt; [1] 20012</code></pre>
</div>
