---
title: "Pacotes miojo - como fazer um pacote no R em 3 minutos [atualizado]"
date: "2022-10-13"
tags: ["miojo"]
categories: ["Tutoriais"]
image: "images/posts/banner/package.webp"
author: ["Julio"]
summary: "[atualizado] Veja como fazer um pacote em R e fazer seus c√≥digos voarem na velocidade da luz"
draft: false
---



<p>Mais de 5 anos atr√°s, escrevi um <a href="https://blog.curso-r.com/posts/2017-09-07-pacote-miojo/">blog post</a> criando um pacote do zero em minutos. Desde ent√£o, o pacote <code>{usethis}</code> emergiu do <code>{devtools}</code>, se tornando uma das ferramentas mais queridas da comunidade R. Por isso, fiz uma vers√£o atualizada do mesmo post, utilizando as melhores pr√°ticas dos dias de hoje.</p>
<p>Aqui, veremos como fazer um pacote em R muito, muito r√°pido. Tirei v√°rias coisas que costumo fazer nos pacotes, com dor no cora√ß√£o, tudo pela velocidade, mantendo s√≥ o essencial.</p>
<p>Duas restri√ß√µes s√£o</p>
<ol style="list-style-type: decimal">
<li>O pacote precisa ficar dispon√≠vel no GitHub.</li>
<li>O pacote precisa ter pelo menos uma fun√ß√£o.</li>
</ol>
<p>Essa √© a solu√ß√£o que eu acho mais segura e r√°pida. Voc√™ tamb√©m pode <a href="https://blog.curso-r.com/posts/2017-07-17-rstudio-e-github/">usar o pr√≥prio RStudio para criar pacotes ou clonar coisas do github</a>, mas isso pode dar mais trabalho.</p>
<div id="passo-1-crie-um-projeto-de-pacote-no-r" class="section level2">
<h2>Passo 1: Crie um projeto de pacote no R</h2>
<ul>
<li>Use a fun√ß√£o <code>usethis::create_package("nomeDoPacote")</code></li>
<li>Escreva o nome do seu pacote. O nome do pacote n√£o pode ter espa√ßos, underline (<code>_</code>) nem h√≠fen (<code>-</code>) nem come√ßar com n√∫meros.</li>
</ul>
<p>Ao fazer isso, o <code>{usethis}</code> abrir√° uma nova tela do RStudio, j√° na estrutura de pacote!</p>
<p><img src="/images/posts/conteudo/2022-10-13-pkg-miojo-2022/paste-4C36371F.png" /></p>
<p>Na tela em que voc√™ escreveu <code>usethis::create_package()</code>, o console ficar√° assim:</p>
<p><img src="/images/posts/conteudo/2022-10-13-pkg-miojo-2022/paste-4CF58355.png" width="458" /></p>
<p><strong>Obs</strong>: cuidado para n√£o criar um pacote dentro de um reposit√≥rio Git (por exemplo, dentro de um projeto que voc√™ j√° est√° trabalhando). Isso pode dar problemas de conflito.</p>
</div>
<div id="passo-2-configurar-git" class="section level2">
<h2>Passo 2: Configurar Git</h2>
<p>Rode <code>usethis::use_git()</code> e confirme nas duas perguntas que ser√£o feitas a voc√™</p>
<p><img src="/images/posts/conteudo/2022-10-13-pkg-miojo-2022/paste-6D455658.png" width="557" /></p>
<p>Sua sess√£o ser√° reiniciada, e o Git est√° configurado üéâ</p>
</div>
<div id="passo-3-configure-o-github" class="section level2">
<h2>Passo 3: configure o GitHub</h2>
<p>Rode <code>usethis::use_github()</code> e confirme a pergunta que ser√° feita. Aqui estou assumindo que voc√™ tem o Git/GitHub configurado na sua m√°quina. Se n√£o estiver, siga o fluxo do livro <a href="https://happygitwithr.com/https-pat.html">Happy Git With R</a>.</p>
<p><img src="/images/posts/conteudo/2022-10-13-pkg-miojo-2022/paste-E41E23E9.png" /></p>
<p>Se tudo der certo, seu pacote j√° estar√° dispon√≠vel no seu GitHub!</p>
</div>
<div id="passo-4-crie-sua-fun√ß√£o" class="section level2">
<h2>Passo 4: Crie sua fun√ß√£o</h2>
<p>Exemplo:</p>
<pre class="r"><code>#&#39; Soma 2
#&#39;
#&#39; Recebe um vetor de n√∫meros e retorna um vetor de n√∫meros somando dois
#&#39;
#&#39; @param x vetor de n√∫meros.
#&#39;
#&#39; @export
soma_2 &lt;- function(x) {
  x + 2
}</code></pre>
<ol style="list-style-type: decimal">
<li>Crie a fun√ß√£o dentro de um arquivo com extens√£o <code>.R</code> na pasta <code>R</code> . Se quiser, voc√™ pode usar a fun√ß√£o <code>usethis::use_r()</code> .</li>
<li>As informa√ß√µes que come√ßam com <code>#'</code> acima da fun√ß√£o servem para documentar. Nesse caso,
<ul>
<li>a primeira linha √© o t√≠tulo</li>
<li>a segunda linha √© a descri√ß√£o</li>
<li>a parte que come√ßa com <code>@param</code> descreve o que √© o par√¢metro de entrada</li>
<li>a parte que come√ßa com <code>@export</code> diz para o pacote que essa fun√ß√£o deve estar dispon√≠vel para o usu√°rio quando ele rodar <code>library(nomeDoPacote)</code>.</li>
</ul></li>
</ol>
</div>
<div id="passo-5-document-commit-e-push" class="section level2">
<h2>Passo 5: document, commit e push!</h2>
<ol style="list-style-type: decimal">
<li>Rode <code>devtools::document()</code>.</li>
<li>Commite suas altera√ß√µes.</li>
<li>D√™ um push!</li>
</ol>
<p>Se n√£o saba o que √© commitar e pushar, veja o artigo do <a href="https://blog.curso-r.com/search/?s=Athos">Athos</a> sobre <a href="https://blog.curso-r.com/posts/2017-07-17-rstudio-e-github/">o uso do git e do GitHub</a>.</p>
</div>
<div id="passo-6-instalar-o-pacote-em-outra-m√°quina" class="section level2">
<h2>Passo 6: Instalar o pacote em outra m√°quina</h2>
<ol style="list-style-type: decimal">
<li>Mande o nome do seu usu√°rio do GitHub e o nome do seu pacote para sua migue.</li>
<li>Pe√ßa para ela rodar:</li>
</ol>
<pre class="r"><code>remotes::install_github(&#39;usuario/nomeDoPacote&#39;)</code></pre>
<ol style="list-style-type: decimal">
<li>Agora ela poder√° usar sua fun√ß√£o!</li>
</ol>
<pre class="r"><code>library(nomeDoPacote)
soma_2(1:10)
# [1]  3  4  5  6  7  8  9 10 11 12</code></pre>
<p>Voc√™ tamb√©m pode ver o help da fun√ß√£o com <code>?soma_2</code>:</p>
<p><img src="/images/posts/conteudo/pacote-miojo/documentacao.webp" /></p>
<p>FIM!</p>
</div>
<div id="conclus√µes" class="section level2">
<h2>Conclus√µes</h2>
<ul>
<li>Agora voc√™ n√£o tem desculpa para n√£o empacotar suas solu√ß√µes em R.</li>
<li>Esse tutorial √© incompleto! Para acessar mais detalhes, veja <a href="http://r-pkgs.had.co.nz" class="uri">http://r-pkgs.had.co.nz</a>, elaborado por voc√™ sabe quem.</li>
</ul>
</div>
<div id="outras-pequenas-dicas-pr√°ticas" class="section level2">
<h2>Outras pequenas dicas pr√°ticas</h2>
<ul>
<li>Use sempre <code>devtools::check()</code> para checar se seu pacote est√° 100% bem constru√≠do.</li>
<li>Use <code>usethis::use_package()</code> para usar fun√ß√µes de outros pacotes.</li>
<li>Sempre use os <code>::</code> para chamar as fun√ß√µes e nunca rode <code>library()</code> ou <code>require()</code> dentro de um pacote.</li>
<li>Use <code>usethis::use_mit_license()</code> para adicionar um arquivo <code>LICENSE</code> ao seu pacote.</li>
<li>Use <code>usethis::use_data()</code> para adicionar dados ao seu pacote.</li>
<li>Use <code>usethis::use_vignettes()</code> para escrever um tutorial sobre seu pacote, <a href="https://cran.r-project.org/web/packages/dplyr/vignettes/dplyr.html">igual a esse do dplyr, por exemplo</a>.</li>
</ul>
<p>√â isso. Happy coding ;)</p>
</div>
